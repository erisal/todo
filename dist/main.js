(()=>{const e=(()=>{let e=function(e){var t;try{t=window.localStorage;var o="__storage_test__";return t.setItem(o,o),t.removeItem(o),!0}catch(e){return e instanceof DOMException&&(22===e.code||1014===e.code||"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&t&&0!==t.length}}();return{copyToLocal:function(t){e&&localStorage.setItem("todo",JSON.stringify(t))},getLocal:function(){if(e&&""!=JSON.parse(localStorage.getItem("todo"))){let e=JSON.parse(localStorage.getItem("todo"));return console.log("local result: "+e),console.log("is array? "+Array.isArray(e)),console.log("length: "+e.length),console.log(e[0][1]),e}return null},resetLocal:function(){e&&localStorage.setItem("todo",JSON.stringify([]))}}})(),t=(e,t="",o="",n=1,l="open")=>{const s=[];return{getTitle:()=>e,setTitle:t=>e=t,getDescription:()=>t,setDescription:e=>t=e,getDue:()=>o,setDue:e=>o=e,getPriority:()=>n,setPriority:e=>n=e,getStatus:()=>l,toggleStatus:()=>{"open"===l&&(l="closed"),"closed"===l&&(l="open")},getTask:()=>[e,t,o,n,l],addNote:e=>{s.unshift(e)},deleteNote:e=>{s.splice(e,1)}}},o=(e,t="")=>{const o=[];return{getTitle:()=>e,setTitle:t=>e=t,getDescription:()=>t,setDescription:e=>t=e,addTask:e=>{o.push(e)},deleteTask:e=>o.splice(e,1),getTasks:()=>o,exportData:()=>{let t=[e,[]];for(let e=0;e<o.length;e++)t[1].push(o[e].getTask());return console.log(t),t}}},n=(()=>{const n=()=>{let e=[];for(let t=0;t<projectList.length;t++)e.push(projectList[t].exportData());return console.log("exporter: "+e),e},l=e=>{let n=[];for(let l=0;l<e.length;l++){let s=o(e[l][0]),a=e[l][1];for(let e=0;e<a.length;e++){let o=a[e][0],n=a[e][1],l=a[e][2],r=a[e][3],d=a[e][4],c=t(o,n,l,r,d);s.addTask(c)}n.push(s)}return n};let s=e.getLocal();return null==s?(projectList=[o("General")],console.log("blank")):(projectList=l(s),console.log("not blank")),{addProject:t=>{projectList.unshift(t),e.copyToLocal(n())},deleteProject:t=>{projectList.splice(t,1),e.copyToLocal(n())},getProjects:()=>projectList,getProject:e=>projectList[e],updateProject:(t,o)=>{projectList.splice(t,1,o),e.copyToLocal(n())},exportProjects:n,importProjects:l}})(),l=t("Task 1","Description for task 1","2-5-2020",2,"open"),s=t("Task 2","Second Description","2-5-2020",1,"closed"),a=t("Task 3","Third Description of task","2-5-2020",4,"open"),r=o("General 1","First project with tasks"),d=o("Second Project","Description here");r.addTask(l),r.addTask(s),r.addTask(a),d.addTask(a),d.addTask(s),d.addTask(l),n.addProject(d),n.addProject(r),console.log("type of p2 = "+d);const c=(()=>{const e=document.querySelector("#content");let o=0,l=n.getProject(o),s=n.getProjects();console.log("project list length here: "+s.length);const a=t=>{e.innerHTML="",o=t,l=n.getProject(t);const s=document.createElement("div");s.id="categoryHead";const a=document.createElement("div");a.id="categoryTitle",a.textContent=l.getTitle();const d=document.createElement("div"),c=document.createElement("input");c.type="button",c.setAttribute("onclick","renderPage.toggleTaskForm()"),c.value="+ add task",c.id="addTaskButton",d.id="categoryFunctions",d.appendChild(c),s.appendChild(a),s.appendChild(d),e.appendChild(s);let i=l.getTasks();for(let e=0;e<i.length;e++)r(i[e],e);document.getElementById("addTaskForm").setAttribute("data-index",t),e.setAttribute("data-index",t)},r=(t,o)=>{let n=document.createElement("div");n.classList.add("taskContainer");let l=document.createElement("div");l.classList.add("taskHead");let s=document.createElement("div");s.classList.add("taskTitle"),s.textContent=t.getTitle();let a=document.createElement("div");a.classList.add("dueDate"),a.textContent=t.getDue();let r=document.createElement("div");r.classList.add("taskFunctions");const d=document.createElement("input");d.type="button",d.setAttribute("onclick",`renderPage.dispatchDelTask(${o})`),d.value="- delete",d.classList.add("delTaskButton"),r.appendChild(d);let c=document.createElement("div");c.classList.add("taskBody");let i=document.createElement("div");i.classList.add("taskDescription"),i.textContent=t.getDescription(),l.appendChild(s),l.appendChild(a),l.appendChild(r),c.appendChild(i),n.appendChild(l),n.appendChild(c),e.appendChild(n)};return{renderContent:a,renderMenu:()=>{const e=document.getElementById("projectMenu");e.innerHTML="",console.log("project list length here2: "+s.length);for(let t=0;t<s.length;t++){console.log("project list: "+s[0].getTitle()),console.log("stringify: "+JSON.stringify(s));let o=document.createElement("a");o.classList.add("projectLink"),o.href="#",o.addEventListener("click",(()=>a(t))),o.textContent=s[t].getTitle(),o.innerHTML=o.innerHTML+"<br>",e.appendChild(o)}},toggleTaskForm:()=>{document.querySelector(".taskWhiteOut").classList.toggle("showTaskForm")},dispatchAddTask:()=>{let e=document.getElementById("newTaskTitle").value,s=document.getElementById("newTaskDescription").value,a=document.getElementById("newTaskDue").value,r=document.getElementById("newTaskPriority").value,d=t(e,s,a,r);l.addTask(d),n.updateProject(o,l),c.toggleTaskForm(),document.getElementById("newTaskTitle").value="",document.getElementById("newTaskDescription").value="",document.getElementById("newTaskDue").value="",document.getElementById("newTaskPriority").value="1",c.renderContent(o)},dispatchDelTask:e=>{l.deleteTask(e),n.updateProject(o,l),c.renderContent(o),console.log(e)}}})();c.renderContent(0),c.renderMenu()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90b2RvLy4vc3JjL2luZGV4LmpzIl0sIm5hbWVzIjpbImxvY1N0b3JhZ2UiLCJsb2NhbFN0b3IiLCJ0eXBlIiwic3RvcmFnZSIsIndpbmRvdyIsIngiLCJzZXRJdGVtIiwicmVtb3ZlSXRlbSIsImUiLCJET01FeGNlcHRpb24iLCJjb2RlIiwibmFtZSIsImxlbmd0aCIsInN0b3JhZ2VBdmFpbGFibGUiLCJjb3B5VG9Mb2NhbCIsInByb2plY3RMaXN0IiwibG9jYWxTdG9yYWdlIiwiSlNPTiIsInN0cmluZ2lmeSIsImdldExvY2FsIiwicGFyc2UiLCJnZXRJdGVtIiwibG9jYWwiLCJjb25zb2xlIiwibG9nIiwiQXJyYXkiLCJpc0FycmF5IiwicmVzZXRMb2NhbCIsIlRhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlIiwicHJpb3JpdHkiLCJzdGF0dXMiLCJub3RlcyIsImdldFRpdGxlIiwic2V0VGl0bGUiLCJuZXdUaXRsZSIsImdldERlc2NyaXB0aW9uIiwic2V0RGVzY3JpcHRpb24iLCJuZXdEZXNjcmlwdGlvbiIsImdldER1ZSIsInNldER1ZSIsIm5ld0R1ZSIsImdldFByaW9yaXR5Iiwic2V0UHJpb3JpdHkiLCJuZXdQcmlvcml0eSIsImdldFN0YXR1cyIsInRvZ2dsZVN0YXR1cyIsImdldFRhc2siLCJhZGROb3RlIiwibm90ZSIsInVuc2hpZnQiLCJkZWxldGVOb3RlIiwibnVtIiwic3BsaWNlIiwiUHJvamVjdCIsInRhc2tzIiwiYWRkVGFzayIsInRhc2siLCJwdXNoIiwiZGVsZXRlVGFzayIsImdldFRhc2tzIiwiZXhwb3J0RGF0YSIsImV4cG9ydGVyIiwiaSIsInByb2plY3RzIiwiZXhwb3J0UHJvamVjdHMiLCJpbXBvcnRQcm9qZWN0cyIsInByb2plY3RBcnIiLCJhcnJGcm9tSW1wb3J0IiwibmV3UHJvamVjdCIsIm5ld1Rhc2tMaXN0IiwiaiIsIm5ld1N0YXR1cyIsIm5ld1Rhc2siLCJwcm9qZWN0SW1wb3J0IiwiYWRkUHJvamVjdCIsInByb2plY3QiLCJkZWxldGVQcm9qZWN0IiwiZ2V0UHJvamVjdHMiLCJnZXRQcm9qZWN0IiwiaW5kZXgiLCJ1cGRhdGVQcm9qZWN0IiwidDEiLCJ0MiIsInQzIiwicDEiLCJwMiIsInJlbmRlclBhZ2UiLCJjb250ZW50IiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY3VycmVudFByb2pJbmRleCIsInJlbmRlckNvbnRlbnQiLCJpbm5lckhUTUwiLCJjYXRIZWFkIiwiY3JlYXRlRWxlbWVudCIsImlkIiwiY2F0VGl0bGUiLCJ0ZXh0Q29udGVudCIsImNhdEZ1bmN0aW9ucyIsImFkZFRhc2tCdXR0b24iLCJzZXRBdHRyaWJ1dGUiLCJ2YWx1ZSIsImFwcGVuZENoaWxkIiwidGFza0xpc3QiLCJyZW5kZXJUYXNrIiwiZ2V0RWxlbWVudEJ5SWQiLCJ0YXNrQ29udGFpbmVyIiwiY2xhc3NMaXN0IiwiYWRkIiwidGFza0hlYWQiLCJ0YXNrVGl0bGUiLCJkdWVEYXRlIiwidGFza0Z1bmN0aW9ucyIsImRlbFRhc2tCdXR0b24iLCJ0YXNrQm9keSIsInRhc2tEZXNjcmlwdGlvbiIsInJlbmRlck1lbnUiLCJwcm9qZWN0TWVudSIsInByb2plY3RMaW5rIiwiaHJlZiIsImFkZEV2ZW50TGlzdGVuZXIiLCJ0b2dnbGVUYXNrRm9ybSIsInRvZ2dsZSIsImRpc3BhdGNoQWRkVGFzayIsImRpc3BhdGNoRGVsVGFzayJdLCJtYXBwaW5ncyI6Ik1BS0EsTUFBTUEsRUFBYSxNQUdmLElBQUlDLEVBR0osU0FBMEJDLEdBQ3RCLElBQUlDLEVBQ0osSUFDSUEsRUFBVUMsT0FBVyxhQUNyQixJQUFJQyxFQUFJLG1CQUdSLE9BRkFGLEVBQVFHLFFBQVFELEVBQUdBLEdBQ25CRixFQUFRSSxXQUFXRixJQUNaLEVBRVgsTUFBTUcsR0FDRixPQUFPQSxhQUFhQyxlQUVMLEtBQVhELEVBQUVFLE1BRVMsT0FBWEYsRUFBRUUsTUFHUyx1QkFBWEYsRUFBRUcsTUFFUywrQkFBWEgsRUFBRUcsT0FFRFIsR0FBOEIsSUFB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VSxFQUFZQyxLQUFPLElBQ25CRCxFQUFZRSxpQkFBaUIsU0FBUyxJQUFNN0IsRUFBYzdCLEtBQzFEd0QsRUFBWXJCLFlBQWNyRixFQUFZa0QsR0FBRzlCLFdBQ3pDc0YsRUFBWTFCLFVBQVkwQixFQUFZMUIsVUFBWSxPQUNoRHlCLEVBQVlmLFlBQVlnQixLQW1ENUJHLGVBL0NtQixLQUNGakMsU0FBU0MsY0FBYyxpQkFDL0JrQixVQUFVZSxPQUFPLGlCQThDMUJDLGdCQW5Db0IsS0FDcEIsSUFBSXpGLEVBQVdzRCxTQUFTaUIsZUFBZSxnQkFBZ0JKLE1BQ25EaEUsRUFBaUJtRCxTQUFTaUIsZUFBZSxzQkFBc0JKLE1BQy9EN0QsRUFBU2dELFNBQVNpQixlQUFlLGNBQWNKLE1BQy9DMUQsRUFBYzZDLFNBQVNpQixlQUFlLG1CQUFtQkosTUFLekQ3QixFQUFVL0MsRUFBS1MsRUFBU0csRUFBZUcsRUFBT0csR0FHbERnQyxFQUFRcEIsUUFBUWlCLEdBQ2hCVCxFQUFTaUIsY0FBY1UsRUFBa0JmLEdBR3pDVyxFQUFXbUMsaUJBdEJYakMsU0FBU2lCLGVBQWUsZ0JBQWdCSixNQUFRLEdBQ2hEYixTQUFTaUIsZUFBZSxzQkFBc0JKLE1BQVEsR0FDdERiLFNBQVNpQixlQUFlLGNBQWNKLE1BQVEsR0FDOUNiLFNBQVNpQixlQUFlLG1CQUFtQkosTUFBUSxJQXFCbkRmLEVBQVdLLGNBQWNELElBa0J6QmtDLGdCQWRxQjdCLElBRXJCcEIsRUFBUWpCLFdBQVdxQyxHQUNuQmhDLEVBQVNpQixjQUFjVSxFQUFrQmYsR0FDekNXLEVBQVdLLGNBQWNELEdBQ3pCdEUsUUFBUUMsSUFBSTBFLE1BbEtELEdBaUxuQlQsRUFBV0ssY0FBYyxHQUN6QkwsRUFBVzhCLGMiLCJmaWxlIjoibWFpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIGFsZXJ0KCdjb25uZWN0ZWQnKTtcbi8vIGNvbnNvbGUubG9nKCd3aHV0Jyk7XG5cbi8vIGNvbnN0IHsgbGlicmFyeSB9ID0gcmVxdWlyZShcIndlYnBhY2tcIik7XG5cbmNvbnN0IGxvY1N0b3JhZ2UgPSAoKCkgPT4ge1xuLy8gY2hlY2sgaWYgbG9jYWwgc3RvcmFnZSBhdmFpbGFibGVcblxuICAgIGxldCBsb2NhbFN0b3IgPSBzdG9yYWdlQXZhaWxhYmxlKCdsb2NhbFN0b3JhZ2UnKTtcbiAgICAvLyBjb25zb2xlLmxvZygnbG9jYWwgc3RvcjogJyArIGxvY2FsU3Rvcik7XG5cbiAgICBmdW5jdGlvbiBzdG9yYWdlQXZhaWxhYmxlKHR5cGUpIHtcbiAgICAgICAgdmFyIHN0b3JhZ2U7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBzdG9yYWdlID0gd2luZG93W3R5cGVdO1xuICAgICAgICAgICAgdmFyIHggPSAnX19zdG9yYWdlX3Rlc3RfXyc7XG4gICAgICAgICAgICBzdG9yYWdlLnNldEl0ZW0oeCwgeCk7XG4gICAgICAgICAgICBzdG9yYWdlLnJlbW92ZUl0ZW0oeCk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgICBjYXRjaChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZSBpbnN0YW5jZW9mIERPTUV4Y2VwdGlvbiAmJiAoXG4gICAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuICAgICAgICAgICAgICAgIGUuY29kZSA9PT0gMjIgfHxcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgICAgICAgICAgZS5jb2RlID09PSAxMDE0IHx8XG4gICAgICAgICAgICAgICAgLy8gdGVzdCBuYW1lIGZpZWxkIHRvbywgYmVjYXVzZSBjb2RlIG1pZ2h0IG5vdCBiZSBwcmVzZW50XG4gICAgICAgICAgICAgICAgLy8gZXZlcnl0aGluZyBleGNlcHQgRmlyZWZveFxuICAgICAgICAgICAgICAgIGUubmFtZSA9PT0gJ1F1b3RhRXhjZWVkZWRFcnJvcicgfHxcbiAgICAgICAgICAgICAgICAvLyBGaXJlZm94XG4gICAgICAgICAgICAgICAgZS5uYW1lID09PSAnTlNfRVJST1JfRE9NX1FVT1RBX1JFQUNIRUQnKSAmJlxuICAgICAgICAgICAgICAgIC8vIGFja25vd2xlZGdlIFF1b3RhRXhjZWVkZWRFcnJvciBvbmx5IGlmIHRoZXJlJ3Mgc29tZXRoaW5nIGFscmVhZHkgc3RvcmVkXG4gICAgICAgICAgICAgICAgKHN0b3JhZ2UgJiYgc3RvcmFnZS5sZW5ndGggIT09IDApO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY29weVRvTG9jYWwocHJvamVjdExpc3Qpe1xuICAgICAgICBpZiAobG9jYWxTdG9yKSB7XG4gICAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcInRvZG9cIiwgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2NhbCBzaG91bGQgYmUgdXBkYXRlZDogJyArIHByb2plY3RMaXN0KTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8vIHJldHVybnMgbG9jYWwgc3RvcmFnZSBpZiBhdmFpbGFibGUsIGlmIG5vdCByZXR1cm5zIGVtcHR5IGFycmF5XG4gICAgZnVuY3Rpb24gZ2V0TG9jYWwoKXtcbiAgICAgICAgaWYgKGxvY2FsU3RvciAmJiBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwidG9kb1wiKSkgIT0gJycpIHtcbiAgICAgICAgICAgIGxldCBsb2NhbCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b2RvXCIpKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCd0eXBlIG9mIGxvY2FsOiAnICsgdHlwZW9mKGxvY2FsKSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnaXMgYXJyYXk6ICcgKyBBcnJheS5pc0FycmF5KGxvY2FsKSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnbGVuZ3RoOiAnICsgbG9jYWwubGVuZ3RoKTtcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdsb2NhbCA9ICcgKyBsb2NhbFswXS5nZXRUaXRsZSgpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdsb2NhbCByZXN1bHQ6ICcgKyBsb2NhbCk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnaXMgYXJyYXk/ICcgKyBBcnJheS5pc0FycmF5KGxvY2FsKSk7XG4gICAgICAgICAgICBjb25zb2xlLmxvZygnbGVuZ3RoOiAnICsgbG9jYWwubGVuZ3RoKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKGxvY2FsWzBdWzFdKTtcbiAgICAgICAgICAgIHJldHVybiBsb2NhbDsgLy88LSBDSEFOR0UgQkFDSyBUTyBUSElTXG5cbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVzZXRMb2NhbCgpIHtcbiAgICAgICAgaWYgKGxvY2FsU3Rvcikge1xuICAgICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3RvZG8nLCBKU09OLnN0cmluZ2lmeShbXSkpO1xuICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ3BhcnNlZCBlbXB0eTogJyArIEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJ0b2RvXCIpKSlcbiAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKEFycmF5LmlzQXJyYXkoSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcInRvZG9cIikpKSk7XG4gICAgICAgICAgICAvLyBjb25zb2xlLmxvZygnUkVTRVQgTE9DQUw6ICcgKyBKU09OLnN0cmluZ2lmeShbXSkpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgY29weVRvTG9jYWwsXG4gICAgICAgIGdldExvY2FsLFxuICAgICAgICByZXNldExvY2FsXG4gICAgfVxuXG59KSgpO1xuXG5cblxuLy8gZnVuY3Rpb24gdG9nZ2xlVGFza0Zvcm0oKSB7XG4vLyAgICAgcmVuZGVyUGFnZS50b2dnbGVUYXNrRm9ybSgpO1xuLy8gfVxuXG5cblxuY29uc3QgVGFzayA9ICh0aXRsZSwgZGVzY3JpcHRpb24gPSAnJywgZHVlID0gJycsIHByaW9yaXR5ID0gMSwgc3RhdHVzID0gJ29wZW4nKSA9PiB7XG4gICAgY29uc3Qgbm90ZXMgPSBbXTtcblxuICAgIGNvbnN0IGdldFRpdGxlID0gKCkgPT4gdGl0bGU7XG4gICAgY29uc3Qgc2V0VGl0bGUgPSAobmV3VGl0bGUpID0+IHRpdGxlID0gbmV3VGl0bGU7XG5cbiAgICBjb25zdCBnZXREZXNjcmlwdGlvbiA9ICgpID0+IGRlc2NyaXB0aW9uO1xuICAgIGNvbnN0IHNldERlc2NyaXB0aW9uID0gKG5ld0Rlc2NyaXB0aW9uKSA9PiBkZXNjcmlwdGlvbiA9IG5ld0Rlc2NyaXB0aW9uO1xuXG4gICAgY29uc3QgZ2V0RHVlID0gKCkgPT4gZHVlO1xuICAgIGNvbnN0IHNldER1ZSA9IChuZXdEdWUpID0+IGR1ZSA9IG5ld0R1ZTtcblxuICAgIGNvbnN0IGdldFByaW9yaXR5ID0gKCkgPT4gcHJpb3JpdHk7XG4gICAgY29uc3Qgc2V0UHJpb3JpdHkgPSAobmV3UHJpb3JpdHkpID0+IHByaW9yaXR5ID0gbmV3UHJpb3JpdHk7XG5cbiAgICBjb25zdCBnZXRTdGF0dXMgPSAoKSA9PiBzdGF0dXM7XG4gICAgY29uc3QgdG9nZ2xlU3RhdHVzID0gKCkgPT4ge1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnb3BlbicpIHN0YXR1cyA9ICdjbG9zZWQnO1xuICAgICAgICBpZiAoc3RhdHVzID09PSAnY2xvc2VkJykgc3RhdHVzID0gJ29wZW4nO1xuICAgIH07XG5cbiAgICAvLyBmb3IgZGVidWdnaW5nLCBub3QgdXNlZD9cbiAgICBjb25zdCBnZXRUYXNrID0gKCkgPT4ge1xuICAgICAgICByZXR1cm4gW3RpdGxlLCBkZXNjcmlwdGlvbiwgZHVlLCBwcmlvcml0eSwgc3RhdHVzXTtcbiAgICB9O1xuXG4gICAgY29uc3QgYWRkTm90ZSA9IChub3RlKSA9PiB7XG4gICAgICAgIG5vdGVzLnVuc2hpZnQobm90ZSk7XG4gICAgfTtcbiAgICBjb25zdCBkZWxldGVOb3RlID0gKG51bSkgPT4ge1xuICAgICAgICBub3Rlcy5zcGxpY2UobnVtLCAxKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRUaXRsZSxcbiAgICAgICAgc2V0VGl0bGUsXG4gICAgICAgIGdldERlc2NyaXB0aW9uLFxuICAgICAgICBzZXREZXNjcmlwdGlvbixcbiAgICAgICAgZ2V0RHVlLFxuICAgICAgICBzZXREdWUsXG4gICAgICAgIGdldFByaW9yaXR5LFxuICAgICAgICBzZXRQcmlvcml0eSxcbiAgICAgICAgZ2V0U3RhdHVzLFxuICAgICAgICB0b2dnbGVTdGF0dXMsXG4gICAgICAgIGdldFRhc2ssXG4gICAgICAgIGFkZE5vdGUsXG4gICAgICAgIGRlbGV0ZU5vdGVcbiAgICB9XG59O1xuXG5jb25zdCBQcm9qZWN0ID0gKHRpdGxlLCBkZXNjcmlwdGlvbiA9ICcnKSA9PiB7XG4gICAgY29uc3QgdGFza3MgPSBbXTtcblxuICAgIGNvbnN0IGdldFRpdGxlID0gKCkgPT4gdGl0bGU7XG4gICAgY29uc3Qgc2V0VGl0bGUgPSAobmV3VGl0bGUpID0+IHRpdGxlID0gbmV3VGl0bGU7XG4gICAgY29uc3QgZ2V0RGVzY3JpcHRpb24gPSAoKSA9PiBkZXNjcmlwdGlvbjtcbiAgICBjb25zdCBzZXREZXNjcmlwdGlvbiA9IChuZXdEZXNjcmlwdGlvbikgPT4gZGVzY3JpcHRpb24gPSBuZXdEZXNjcmlwdGlvbjtcblxuICAgIGNvbnN0IGFkZFRhc2sgPSAodGFzaykgPT4ge1xuICAgICAgICB0YXNrcy5wdXNoKHRhc2spO1xuICAgIH07XG5cbiAgICBjb25zdCBkZWxldGVUYXNrID0gKG51bSkgPT4gdGFza3Muc3BsaWNlKG51bSwgMSk7XG5cbiAgICBjb25zdCBnZXRUYXNrcyA9ICgpID0+IHRhc2tzO1xuXG4gICAgY29uc3QgZXhwb3J0RGF0YSA9ICgpID0+IHtcbiAgICAgICAgbGV0IGV4cG9ydGVyID0gW3RpdGxlLCBbXV07XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFza3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGV4cG9ydGVyWzFdLnB1c2godGFza3NbaV0uZ2V0VGFzaygpKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zb2xlLmxvZyhleHBvcnRlcik7XG4gICAgICAgIHJldHVybiBleHBvcnRlcjtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgICBnZXRUaXRsZSxcbiAgICAgICAgc2V0VGl0bGUsXG4gICAgICAgIGdldERlc2NyaXB0aW9uLFxuICAgICAgICBzZXREZXNjcmlwdGlvbixcbiAgICAgICAgYWRkVGFzayxcbiAgICAgICAgZGVsZXRlVGFzayxcbiAgICAgICAgZ2V0VGFza3MsXG4gICAgICAgIGV4cG9ydERhdGFcbiAgICB9XG59O1xuXG5jb25zdCBwcm9qZWN0cyA9ICgoKSA9PiB7XG5cbiAgICBjb25zdCBhZGRQcm9qZWN0ID0gKHByb2plY3QpID0+IHtcbiAgICAgICAgcHJvamVjdExpc3QudW5zaGlmdChwcm9qZWN0KTtcbiAgICAgICAgbG9jU3RvcmFnZS5jb3B5VG9Mb2NhbChleHBvcnRQcm9qZWN0cygpKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Byb2plY3RBZGRlZCcgKyBwcm9qZWN0LmdldFRpdGxlKCkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZyhwcm9qZWN0KTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coSlNPTi5zdHJpbmdpZnkocHJvamVjdCkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnY3VycmVudCBsaXN0OiAnICsgcHJvamVjdExpc3QpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnY3VycmVudCBsaXN0IHN0cmluZ2VkOiAnICsgSlNPTi5zdHJpbmdpZnkocHJvamVjdExpc3QpKTtcbiAgICAgICAgLy8gY29uc29sZS5sb2coJ3Byb2plY3RMaXN0QWZ0ZXJBZGQgJyArIHByb2plY3RMaXN0WzBdLmdldFRpdGxlKCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGNyZWF0ZUJsYW5rID0gKCkgPT4ge1xuICAgICAgICBsZXQgYmxhbmsgPSBQcm9qZWN0KCdHZW5lcmFsJyk7XG4gICAgICAgIHJldHVybiBbYmxhbmtdO1xuICAgIH1cblxuICAgIGNvbnN0IGRlbGV0ZVByb2plY3QgPSAobnVtKSA9PiB7XG4gICAgICAgIHByb2plY3RMaXN0LnNwbGljZShudW0sIDEpO1xuICAgICAgICBsb2NTdG9yYWdlLmNvcHlUb0xvY2FsKGV4cG9ydFByb2plY3RzKCkpO1xuICAgIH1cblxuICAgIGNvbnN0IGdldFByb2plY3QgPSAoaW5kZXgpID0+ICBwcm9qZWN0TGlzdFtpbmRleF07XG5cbiAgICBjb25zdCBnZXRQcm9qZWN0cyA9ICgpID0+IHByb2plY3RMaXN0O1xuXG4gICAgY29uc3QgdXBkYXRlUHJvamVjdCA9IChpbmRleCwgcHJvamVjdCkgPT4ge1xuICAgICAgICBwcm9qZWN0TGlzdC5zcGxpY2UoaW5kZXgsIDEsIHByb2plY3QpO1xuICAgICAgICBsb2NTdG9yYWdlLmNvcHlUb0xvY2FsKGV4cG9ydFByb2plY3RzKCkpO1xuICAgICAgICAvLyBjb25zb2xlLmxvZygnTE9DQUwgSEFTIEJFRU4gVVBEQVRFRCcpO1xuICAgIH1cblxuICAgIGNvbnN0IGV4cG9ydFByb2plY3RzID0gKCkgPT4ge1xuICAgICAgICBsZXQgZXhwb3J0ZXIgPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBwcm9qZWN0TGlzdC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgZXhwb3J0ZXIucHVzaChwcm9qZWN0TGlzdFtpXS5leHBvcnREYXRhKCkpO1xuICAgICAgICB9O1xuICAgICAgICBjb25zb2xlLmxvZygnZXhwb3J0ZXI6ICcgKyBleHBvcnRlcik7XG4gICAgICAgIHJldHVybiBleHBvcnRlcjtcbiAgICB9XG5cbiAgICBjb25zdCBpbXBvcnRQcm9qZWN0cyA9IChwcm9qZWN0QXJyKSA9PiB7XG4gICAgICAgIGxldCBhcnJGcm9tSW1wb3J0ID0gW107XG4gICAgICAgIC8vIGN5Y2xlIHRocm91Z2ggZWFjaCBwcm9qZWN0XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdEFyci5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgbGV0IG5ld1Byb2plY3QgPSBQcm9qZWN0KHByb2plY3RBcnJbaV1bMF0pO1xuXG4gICAgICAgICAgICAvLyBnZXQgYXJyYXkgY29udGFpbmluZyB0YXNrKHMpXG4gICAgICAgICAgICBsZXQgbmV3VGFza0xpc3QgPSBwcm9qZWN0QXJyW2ldWzFdO1xuXG4gICAgICAgICAgICAvLyBDSEFOR0UgVEFTS1MgRlJPTSBBUlJBWSBUTyBPQkpFQ1RTIFcvIEtFWVNcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBuZXcgdGFza3MgZnJvbSBlYWNoIHRhc2ssIGFkZCB0aGVtIHRvIHByb2plY3RcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbmV3VGFza0xpc3QubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBsZXQgbmV3VGl0bGUgPSBuZXdUYXNrTGlzdFtqXVswXTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RGVzY3JpcHRpb24gPSBuZXdUYXNrTGlzdFtqXVsxXTtcbiAgICAgICAgICAgICAgICBsZXQgbmV3RHVlID0gbmV3VGFza0xpc3Rbal1bMl07XG4gICAgICAgICAgICAgICAgbGV0IG5ld1ByaW9yaXR5ID0gbmV3VGFza0xpc3Rbal1bM107XG4gICAgICAgICAgICAgICAgbGV0IG5ld1N0YXR1cyA9IG5ld1Rhc2tMaXN0W2pdWzRdO1xuXG4gICAgICAgICAgICAgICAgbGV0IG5ld1Rhc2sgPSBUYXNrKG5ld1RpdGxlLCBuZXdEZXNjcmlwdGlvbiwgbmV3RHVlLCBuZXdQcmlvcml0eSwgbmV3U3RhdHVzKTtcbiAgICAgICAgICAgICAgICBuZXdQcm9qZWN0LmFkZFRhc2sobmV3VGFzaylcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vcHVzaCBwb3B1bGF0ZWQgcHJvamVjdCBpbnRvIG5ldyBwcm9qZWN0IGxpc3RcbiAgICAgICAgICAgIGFyckZyb21JbXBvcnQucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgICAgICAgIFxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBhcnJGcm9tSW1wb3J0O1xuICAgIH1cblxuICAgIGxldCBwcm9qZWN0SW1wb3J0ID0gbG9jU3RvcmFnZS5nZXRMb2NhbCgpO1xuXG4gICAgLy9URU1QIENSRUFURSBHRU5FUkFMIEVNUFRZIFRBU0tcbiAgICBpZiAocHJvamVjdEltcG9ydCA9PSBudWxsKSB7XG4gICAgICAgIHByb2plY3RMaXN0ID0gY3JlYXRlQmxhbmsoKTtcbiAgICAgICAgY29uc29sZS5sb2coJ2JsYW5rJyk7XG4gICAgfVxuICAgIGVsc2Uge1xuICAgICAgICBwcm9qZWN0TGlzdCA9IGltcG9ydFByb2plY3RzKHByb2plY3RJbXBvcnQpO1xuICAgICAgICBjb25zb2xlLmxvZygnbm90IGJsYW5rJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgICAgYWRkUHJvamVjdCxcbiAgICAgICAgZGVsZXRlUHJvamVjdCxcbiAgICAgICAgZ2V0UHJvamVjdHMsXG4gICAgICAgIGdldFByb2plY3QsXG4gICAgICAgIHVwZGF0ZVByb2plY3QsXG4gICAgICAgIGV4cG9ydFByb2plY3RzLFxuICAgICAgICBpbXBvcnRQcm9qZWN0c1xuICAgIH1cblxufSkoKTtcblxuXG4vLyBkdW1teSB0YXNrcy9wcm9qZWN0cyBmb3IgbGF5b3V0XG5jb25zdCB0MSA9IFRhc2soJ1Rhc2sgMScsICdEZXNjcmlwdGlvbiBmb3IgdGFzayAxJywgJzItNS0yMDIwJywgMiwgJ29wZW4nKTtcbmNvbnN0IHQyID0gVGFzaygnVGFzayAyJywgJ1NlY29uZCBEZXNjcmlwdGlvbicsICcyLTUtMjAyMCcsIDEsICdjbG9zZWQnKTtcbmNvbnN0IHQzID0gVGFzaygnVGFzayAzJywgJ1RoaXJkIERlc2NyaXB0aW9uIG9mIHRhc2snLCAnMi01LTIwMjAnLCA0LCAnb3BlbicpO1xuXG5jb25zdCBwMSA9IFByb2plY3QoJ0dlbmVyYWwgMScsICdGaXJzdCBwcm9qZWN0IHdpdGggdGFza3MnKTtcbmNvbnN0IHAyID0gUHJvamVjdCgnU2Vjb25kIFByb2plY3QnLCAnRGVzY3JpcHRpb24gaGVyZScpO1xuXG5wMS5hZGRUYXNrKHQxKTtcbnAxLmFkZFRhc2sodDIpO1xucDEuYWRkVGFzayh0Myk7XG5cbnAyLmFkZFRhc2sodDMpO1xucDIuYWRkVGFzayh0Mik7XG5wMi5hZGRUYXNrKHQxKTtcblxucHJvamVjdHMuYWRkUHJvamVjdChwMik7XG5wcm9qZWN0cy5hZGRQcm9qZWN0KHAxKTtcbmNvbnNvbGUubG9nKCd0eXBlIG9mIHAyID0gJyArIHAyKTtcblxuLy9jb250cm9sbGVyICBmb3IgRE9NIGVsZW1lbnRzXG5jb25zdCByZW5kZXJQYWdlID0gKCgpID0+IHtcbiAgICBjb25zdCBjb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignI2NvbnRlbnQnKTtcbiAgICBsZXQgY3VycmVudFByb2pJbmRleCA9IDA7XG4gICAgbGV0IHByb2plY3QgPSBwcm9qZWN0cy5nZXRQcm9qZWN0KGN1cnJlbnRQcm9qSW5kZXgpO1xuICAgIGxldCBwcm9qZWN0TGlzdCA9IHByb2plY3RzLmdldFByb2plY3RzKCk7XG4gICAgY29uc29sZS5sb2coJ3Byb2plY3QgbGlzdCBsZW5ndGggaGVyZTogJyArIHByb2plY3RMaXN0Lmxlbmd0aCk7XG4gICAgXG4gICAgXG4gICAgY29uc3QgcmVuZGVyQ29udGVudCA9IChpbmRleCkgPT4ge1xuICAgICAgICAvL2NsZWFyIHBhZ2VcbiAgICAgICAgLy8gY29uc3QgY29udGVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdjb250ZW50Jyk7XG4gICAgICAgIGNvbnRlbnQuaW5uZXJIVE1MID0gJyc7XG5cbiAgICAgICAgLy8gdXBkYXRlIGN1cnJlbnQgcHJvamVjdCBpbmRleCAjXG4gICAgICAgIGN1cnJlbnRQcm9qSW5kZXggPSBpbmRleDtcblxuICAgICAgICAvL3VwZGF0ZSBjdXJyZW50IHByb2plY3RcbiAgICAgICAgcHJvamVjdCA9IHByb2plY3RzLmdldFByb2plY3QoaW5kZXgpO1xuXG4gICAgICAgIC8vcmVuZGVyIHRpdGxlXG4gICAgICAgIGNvbnN0IGNhdEhlYWQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY2F0SGVhZC5pZCA9ICdjYXRlZ29yeUhlYWQnO1xuXG4gICAgICAgIGNvbnN0IGNhdFRpdGxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGNhdFRpdGxlLmlkID0gJ2NhdGVnb3J5VGl0bGUnO1xuICAgICAgICBjYXRUaXRsZS50ZXh0Q29udGVudCA9IHByb2plY3QuZ2V0VGl0bGUoKTtcblxuICAgICAgICBjb25zdCBjYXRGdW5jdGlvbnMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29uc3QgYWRkVGFza0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgIGFkZFRhc2tCdXR0b24udHlwZSA9ICdidXR0b24nO1xuICAgICAgICBhZGRUYXNrQnV0dG9uLnNldEF0dHJpYnV0ZSgnb25jbGljaycsICdyZW5kZXJQYWdlLnRvZ2dsZVRhc2tGb3JtKCknKTtcbiAgICAgICAgYWRkVGFza0J1dHRvbi52YWx1ZSA9IFwiKyBhZGQgdGFza1wiO1xuICAgICAgICBhZGRUYXNrQnV0dG9uLmlkID0gXCJhZGRUYXNrQnV0dG9uXCI7XG4gICAgICAgIGNhdEZ1bmN0aW9ucy5pZCA9ICdjYXRlZ29yeUZ1bmN0aW9ucyc7XG4gICAgICAgIGNhdEZ1bmN0aW9ucy5hcHBlbmRDaGlsZChhZGRUYXNrQnV0dG9uKTtcblxuICAgICAgICBjYXRIZWFkLmFwcGVuZENoaWxkKGNhdFRpdGxlKTtcbiAgICAgICAgY2F0SGVhZC5hcHBlbmRDaGlsZChjYXRGdW5jdGlvbnMpO1xuICAgICAgICBcbiAgICAgICAgY29udGVudC5hcHBlbmRDaGlsZChjYXRIZWFkKTtcblxuICAgICAgICAvL3JlbmRlciB0YXNrc1xuICAgICAgICBsZXQgdGFza0xpc3QgPSBwcm9qZWN0LmdldFRhc2tzKCk7XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGFza0xpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIHJlbmRlclRhc2sodGFza0xpc3RbaV0sIGkpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy91cGRhdGUgYWRkIHRhc2sgZm9ybVxuICAgICAgICBjb25zdCBhZGRUYXNrRm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdhZGRUYXNrRm9ybScpO1xuICAgICAgICBhZGRUYXNrRm9ybS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaW5kZXgnLCBpbmRleCk7XG5cbiAgICAgICAgLy91cGRhdGUgZGF0YS1pbmRleCBmb3IgY29udGVudCBwYWdlLCB0byB0cmFjayBmb3Igb3RoZXIgZnVuY3Rpb25zXG4gICAgICAgIGNvbnRlbnQuc2V0QXR0cmlidXRlKCdkYXRhLWluZGV4JywgaW5kZXgpO1xuICAgIH07XG5cbiAgICBjb25zdCByZW5kZXJUYXNrID0gKHRhc2ssIGluZGV4KSA9PiB7XG4gICAgICAgIGxldCB0YXNrQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRhc2tDb250YWluZXIuY2xhc3NMaXN0LmFkZCgndGFza0NvbnRhaW5lcicpO1xuXG4gICAgICAgIGxldCB0YXNrSGVhZCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrSGVhZC5jbGFzc0xpc3QuYWRkKCd0YXNrSGVhZCcpO1xuXG4gICAgICAgIGxldCB0YXNrVGl0bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza1RpdGxlLmNsYXNzTGlzdC5hZGQoJ3Rhc2tUaXRsZScpO1xuICAgICAgICB0YXNrVGl0bGUudGV4dENvbnRlbnQgPSB0YXNrLmdldFRpdGxlKCk7XG5cbiAgICAgICAgbGV0IGR1ZURhdGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZHVlRGF0ZS5jbGFzc0xpc3QuYWRkKCdkdWVEYXRlJyk7XG4gICAgICAgIGR1ZURhdGUudGV4dENvbnRlbnQgPSB0YXNrLmdldER1ZSgpO1xuICAgICAgICBcblxuICAgICAgICBsZXQgdGFza0Z1bmN0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrRnVuY3Rpb25zLmNsYXNzTGlzdC5hZGQoJ3Rhc2tGdW5jdGlvbnMnKTtcblxuICAgICAgICBjb25zdCBkZWxUYXNrQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgZGVsVGFza0J1dHRvbi50eXBlID0gJ2J1dHRvbic7XG4gICAgICAgIGRlbFRhc2tCdXR0b24uc2V0QXR0cmlidXRlKCdvbmNsaWNrJywgYHJlbmRlclBhZ2UuZGlzcGF0Y2hEZWxUYXNrKCR7aW5kZXh9KWApO1xuICAgICAgICBkZWxUYXNrQnV0dG9uLnZhbHVlID0gXCItIGRlbGV0ZVwiO1xuICAgICAgICBkZWxUYXNrQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2RlbFRhc2tCdXR0b24nKTtcblxuICAgICAgICB0YXNrRnVuY3Rpb25zLmFwcGVuZENoaWxkKGRlbFRhc2tCdXR0b24pO1xuXG4gICAgICAgIGxldCB0YXNrQm9keSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0YXNrQm9keS5jbGFzc0xpc3QuYWRkKCd0YXNrQm9keScpO1xuXG4gICAgICAgIGxldCB0YXNrRGVzY3JpcHRpb24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGFza0Rlc2NyaXB0aW9uLmNsYXNzTGlzdC5hZGQoJ3Rhc2tEZXNjcmlwdGlvbicpO1xuICAgICAgICB0YXNrRGVzY3JpcHRpb24udGV4dENvbnRlbnQgPSB0YXNrLmdldERlc2NyaXB0aW9uKCk7XG5cbiAgICAgICAgdGFza0hlYWQuYXBwZW5kQ2hpbGQodGFza1RpdGxlKTtcbiAgICAgICAgdGFza0hlYWQuYXBwZW5kQ2hpbGQoZHVlRGF0ZSk7XG4gICAgICAgIHRhc2tIZWFkLmFwcGVuZENoaWxkKHRhc2tGdW5jdGlvbnMpO1xuXG4gICAgICAgIHRhc2tCb2R5LmFwcGVuZENoaWxkKHRhc2tEZXNjcmlwdGlvbik7XG5cbiAgICAgICAgdGFza0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0YXNrSGVhZCk7XG4gICAgICAgIHRhc2tDb250YWluZXIuYXBwZW5kQ2hpbGQodGFza0JvZHkpO1xuXG4gICAgICAgIC8vIGFkZCB0YXNrIHRvIGNvbnRlbnQgc2VjdGlvblxuICAgICAgICBjb250ZW50LmFwcGVuZENoaWxkKHRhc2tDb250YWluZXIpO1xuXG4gICAgfTtcblxuICAgICAgICAvL2dlbmVyYXRlIG1lbnUgbGlua3NcbiAgICBjb25zdCByZW5kZXJNZW51ID0gKCkgPT4geyBcbiAgICAgICAgY29uc3QgcHJvamVjdE1lbnUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvamVjdE1lbnUnKTtcbiAgICAgICAgcHJvamVjdE1lbnUuaW5uZXJIVE1MID0gJyc7XG4gICAgICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0IGxpc3QgbGVuZ3RoIGhlcmUyOiAnICsgcHJvamVjdExpc3QubGVuZ3RoKTtcbiAgICAgICAgXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcHJvamVjdExpc3QubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdwcm9qZWN0IGxpc3Q6ICcgKyBwcm9qZWN0TGlzdFswXS5nZXRUaXRsZSgpKTtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdzdHJpbmdpZnk6ICcgKyBKU09OLnN0cmluZ2lmeShwcm9qZWN0TGlzdCkpO1xuICAgICAgICAgICAgbGV0IHByb2plY3RMaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgICAgICAgICAgcHJvamVjdExpbmsuY2xhc3NMaXN0LmFkZCgncHJvamVjdExpbmsnKTtcbiAgICAgICAgICAgIHByb2plY3RMaW5rLmhyZWYgPSBcIiNcIjtcbiAgICAgICAgICAgIHByb2plY3RMaW5rLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gcmVuZGVyQ29udGVudChpKSk7XG4gICAgICAgICAgICBwcm9qZWN0TGluay50ZXh0Q29udGVudCA9IHByb2plY3RMaXN0W2ldLmdldFRpdGxlKCk7XG4gICAgICAgICAgICBwcm9qZWN0TGluay5pbm5lckhUTUwgPSBwcm9qZWN0TGluay5pbm5lckhUTUwgKyBcIjxicj5cIlxuICAgICAgICAgICAgcHJvamVjdE1lbnUuYXBwZW5kQ2hpbGQocHJvamVjdExpbmspO1xuICAgICAgICB9O1xuICAgIH07XG5cbiAgICBjb25zdCB0b2dnbGVUYXNrRm9ybSA9ICgpID0+IHtcbiAgICAgICAgY29uc3QgdGFza0Zvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudGFza1doaXRlT3V0Jyk7XG4gICAgICAgIHRhc2tGb3JtLmNsYXNzTGlzdC50b2dnbGUoJ3Nob3dUYXNrRm9ybScpXG5cbiAgICB9O1xuXG4gICAgY29uc3QgcmVzZXRUYXNrRm9ybSA9ICgpID0+IHtcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ25ld1Rhc2tUaXRsZScpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdUYXNrRGVzY3JpcHRpb24nKS52YWx1ZSA9ICcnO1xuICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3VGFza0R1ZScpLnZhbHVlID0gJyc7XG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdUYXNrUHJpb3JpdHknKS52YWx1ZSA9ICcxJztcbiAgICB9O1xuXG4gICAgY29uc3QgZGlzcGF0Y2hBZGRUYXNrID0gKCkgPT4ge1xuICAgICAgICBsZXQgbmV3VGl0bGUgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnbmV3VGFza1RpdGxlJykudmFsdWU7XG4gICAgICAgIGxldCBuZXdEZXNjcmlwdGlvbiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdUYXNrRGVzY3JpcHRpb24nKS52YWx1ZTtcbiAgICAgICAgbGV0IG5ld0R1ZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdUYXNrRHVlJykudmFsdWU7XG4gICAgICAgIGxldCBuZXdQcmlvcml0eSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCduZXdUYXNrUHJpb3JpdHknKS52YWx1ZTtcblxuICAgICAgICAvLyByZXRyaWV2ZSBjdXJyZW50IHByb2plY3RzIGluZGV4IGRpc3BsYXllZFxuICAgICAgICAvLyBsZXQgY3VycmVudEluZGV4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2NvbnRlbnQnKS5kYXRhc2V0LmluZGV4O1xuIFxuICAgICAgICBsZXQgbmV3VGFzayA9IFRhc2sobmV3VGl0bGUsbmV3RGVzY3JpcHRpb24sbmV3RHVlLG5ld1ByaW9yaXR5KTtcblxuICAgICAgICAvLyBsZXQgY3VycmVudFByb2plY3QgPSBwcm9qZWN0cy5nZXRQcm9qZWN0KGN1cnJlbnRJbmRleCk7XG4gICAgICAgIHByb2plY3QuYWRkVGFzayhuZXdUYXNrKTtcbiAgICAgICAgcHJvamVjdHMudXBkYXRlUHJvamVjdChjdXJyZW50UHJvakluZGV4LCBwcm9qZWN0KTtcblxuXG4gICAgICAgIHJlbmRlclBhZ2UudG9nZ2xlVGFza0Zvcm0oKTtcbiAgICAgICAgcmVzZXRUYXNrRm9ybSgpO1xuICAgICAgICByZW5kZXJQYWdlLnJlbmRlckNvbnRlbnQoY3VycmVudFByb2pJbmRleCk7XG5cbiAgICB9O1xuXG4gICAgY29uc3QgZGlzcGF0Y2hEZWxUYXNrID0gKGlkKSA9PiB7XG4gICAgICAgIC8vIHJldHJpZXZlIGN1cnJlbnQgcHJvamVjdHMgaW5kZXggZGlzcGxheWVkXG4gICAgICAgIHByb2plY3QuZGVsZXRlVGFzayhpZCk7XG4gICAgICAgIHByb2plY3RzLnVwZGF0ZVByb2plY3QoY3VycmVudFByb2pJbmRleCwgcHJvamVjdCk7XG4gICAgICAgIHJlbmRlclBhZ2UucmVuZGVyQ29udGVudChjdXJyZW50UHJvakluZGV4KTtcbiAgICAgICAgY29uc29sZS5sb2coaWQpO1xuXG4gICAgfTtcbiAgICBcbiAgICByZXR1cm4ge1xuICAgICAgICByZW5kZXJDb250ZW50LFxuICAgICAgICByZW5kZXJNZW51LFxuICAgICAgICB0b2dnbGVUYXNrRm9ybSxcbiAgICAgICAgZGlzcGF0Y2hBZGRUYXNrLFxuICAgICAgICBkaXNwYXRjaERlbFRhc2tcbiAgICB9XG5cbn0pKCk7XG4vLyBsb2NTdG9yYWdlLnJlc2V0TG9jYWwoKTtcblxucmVuZGVyUGFnZS5yZW5kZXJDb250ZW50KDApO1xucmVuZGVyUGFnZS5yZW5kZXJNZW51KCk7XG5cblxuXG4iXSwic291cmNlUm9vdCI6IiJ9